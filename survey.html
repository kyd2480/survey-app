<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>설문 페이지</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <h1>설문에 응답해주세요</h1>
  <form id="surveyForm">
    <label>1. 오늘 기분은?
      <select name="q1" required>
        <option value="">선택</option>
        <option>좋음</option>
        <option>보통</option>
        <option>나쁨</option>
      </select>
    </label><br/><br/>
    <label>2. 자유롭게 의견을 남겨주세요:
      <textarea name="q2" rows="4" cols="40"></textarea>
    </label><br/><br/>
    <button type="submit">제출</button>
  </form>

  <script>
  const params = new URLSearchParams(location.search);
  const part = params.get('part'),
        name = params.get('name');

  document.getElementById('surveyForm')
    .addEventListener('submit', e => {
      e.preventDefault();
      const q1 = e.target.q1.value;
      const q2 = e.target.q2.value;
      // localStorage 에 기존 응답 불러오기
      const responses = JSON.parse(localStorage.getItem('responses') || '[]');
      // 새 응답 추가
      responses.push({ part, name, q1, q2, time: new Date().toISOString() });
      localStorage.setItem('responses', JSON.stringify(responses));
      // 결과 페이지로 이동
      location.href = 'results.html';
    });
</script>

</body>
</html>
